<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VIBE FX Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/6.7.0/ethers.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&family=Kanit:ital,wght@1,900&display=swap" rel="stylesheet">
    <style>
        body { background-color: #000; color: white; font-family: 'Kanit', sans-serif; overflow-x: hidden; }
        .graffiti { font-family: 'Permanent Marker', cursive; }

        /* The Drip Border Effect */
        .vibe-card {
            background: rgba(0, 0, 0, 0.95);
            border: 4px solid var(--glow);
            border-radius: 2rem;
            position: relative;
            box-shadow: 0 0 25px var(--glow), inset 0 0 10px var(--glow);
        }

        .vibe-card::after {
            content: ''; position: absolute; bottom: -24px; left: 0; right: 0; height: 30px;
            background: var(--glow);
            clip-path: polygon(10% 0%, 12% 100%, 15% 0%, 30% 0%, 32% 80%, 35% 0%, 55% 0%, 57% 95%, 60% 0%, 80% 0%, 82% 100%, 85% 0%, 92% 0%, 94% 75%, 97% 0%);
        }

        .main-logo {
            font-size: 8rem; line-height: 0.8;
            -webkit-text-stroke: 2px white;
            text-shadow: 6px 6px 0px #ff0000;
        }

        .bounty-locked { filter: grayscale(1) brightness(0.3); opacity: 0.5; pointer-events: none; }
    </style>
</head>
<body class="flex flex-col items-center py-12 px-6 bg-[url('https://www.transparenttextures.com/patterns/black-linen.png')]">

    <div class="text-center mb-10">
        <h1 class="graffiti main-logo uppercase italic tracking-tighter">VIBE <span class="opacity-50">FX</span></h1>
        <button id="connectBtn" class="mt-8 flex items-center gap-2 px-10 py-2 border-2 border-cyan-400 rounded-full text-cyan-400 font-bold shadow-[0_0_15px_#22d3ee] hover:bg-cyan-400 hover:text-black transition mx-auto">
            <span>üìÅ</span> Connect Wallet
        </button>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-10 w-full max-w-6xl mb-16">
        
        <div class="vibe-card p-10 flex flex-col items-center text-center" style="--glow: #b4ff39;">
            <div class="w-20 h-20 rounded-full border-4 border-white flex items-center justify-center mb-4">
                <span class="text-4xl">‚úî</span>
            </div>
            <h2 class="text-3xl font-black italic uppercase leading-tight">Claim<br>$GREENDAYS</h2>
            <p class="text-[10px] mt-2 tracking-widest font-bold opacity-60">EARN CHECK-IN REWARDS</p>
        </div>

        <div id="bountyCard" class="vibe-card p-10 flex flex-col items-center text-center bounty-locked" style="--glow: #ff7e00;">
            <span id="bountyTag" class="absolute -top-4 left-4 bg-[#b4ff39] text-black font-black px-3 py-1 rounded italic uppercase text-xs rotate-[-5deg]">Bounty</span>
            <div class="w-24 h-36 bg-gradient-to-b from-yellow-400 to-red-600 rounded-xl border-2 border-white mb-4 flex items-center justify-center shadow-2xl">
                <span class="text-[10px] font-black text-white">MYTHIC</span>
            </div>
            <h2 class="text-2xl font-black italic uppercase leading-tight text-white">Pull the<br>Foil Legend</h2>
            <p class="text-orange-500 text-[10px] mt-2 font-bold uppercase">Redeem Mythic Worth $4600</p>
        </div>

        <div onclick="window.location.href='/gallery'" class="vibe-card p-10 flex flex-col items-center text-center cursor-pointer" style="--glow: #22d3ee;">
            <div class="flex -space-x-8 mb-6">
                <div class="w-16 h-24 bg-blue-900 border border-cyan-400 rounded-lg rotate-[-15deg] opacity-50"></div>
                <div class="w-16 h-24 bg-blue-700 border-2 border-cyan-400 rounded-lg z-10 shadow-2xl"></div>
            </div>
            <h2 class="text-3xl font-black italic uppercase leading-tight text-white">View Gallery</h2>
            <p class="text-[10px] mt-2 tracking-widest font-bold opacity-60">SHOW YOUR VIBE FX CARDS</p>
        </div>
    </div>

    <div class="vibe-card w-full max-w-6xl p-8 flex flex-wrap items-center justify-between" style="--glow: #fde047; border-radius: 3rem;">
        <div class="flex items-center gap-8">
            <h2 class="graffiti text-7xl italic text-white drop-shadow-[4px_4px_0px_#ff0000]">VIBEX</h2>
            <div class="flex flex-col">
                <span class="text-yellow-400 font-bold uppercase text-xs tracking-widest">VIBE FX Collection</span>
                <span class="text-white font-black text-2xl uppercase italic">
                    Live Pack Price: <span id="pack-price">...</span> 
                    <span class="text-yellow-400 ml-6">‚òÖ Balance: <span id="balance">0</span> $vbfx</span>
                </span>
            </div>
        </div>
        <a href="https://vibechain.com/market/vibe-fx" target="_blank" class="bg-yellow-400 text-black px-12 py-4 rounded-full font-black text-2xl italic hover:bg-white shadow-2xl transition">BUY NOW ‚ñ∂</a>
    </div>

    <script>
        const TOKEN_ADDR = "0x30d24fc619f59f6f267ee884d802288e124b17c1";
        const DROP_ADDR = "0xc7f2d8c035b2505f30a5417c0374ac0299d88553";
        const PROXY = "https://api.allorigins.win/get?url=";
        const MARKET = "https://vibechain.com/market/vibe-fx";

        async function fetchPrice() {
            try {
                const res = await fetch(`${PROXY}${encodeURIComponent(MARKET)}`);
                const data = await res.json();
                const doc = new DOMParser().parseFromString(data.contents, 'text/html');
                const price = doc.querySelector('.text-2xl.font-bold') || doc.querySelector('[class*="price"]');
                document.getElementById('pack-price').innerText = price ? price.innerText.trim() : "View Market";
            } catch (e) { document.getElementById('pack-price').innerText = "Offline"; }
        }

        async function init() {
            if (!window.ethereum) return alert("Install MetaMask");
            const provider = new ethers.BrowserProvider(window.ethereum);
            const accounts = await provider.send("eth_requestAccounts", []);
            const address = accounts[0];
            document.getElementById('connectBtn').innerText = address.slice(0,6) + "..." + address.slice(-4);

            const tokenContract = new ethers.Contract(TOKEN_ADDR, ["function balanceOf(address) view returns (uint256)", "function decimals() view returns (uint8)"], provider);
            const bal = await tokenContract.balanceOf(address);
            const dec = await tokenContract.decimals();
            document.getElementById('balance').innerText = parseFloat(ethers.formatUnits(bal, dec)).toLocaleString();

            const nftContract = new ethers.Contract(DROP_ADDR, ["function balanceOf(address) view returns (uint256)"], provider);
            const nftBal = await nftContract.balanceOf(address);
            if (nftBal > 0n) {
                document.getElementById('bountyCard').classList.remove('bounty-locked');
                document.getElementById('bountyTag').innerText = "UNLOCKED";
            }
        }

        document.getElementById('connectBtn').onclick = init;
        fetchPrice();
        setInterval(fetchPrice, 30000);
    </script>
</body>
</html>
